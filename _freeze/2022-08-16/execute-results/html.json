{
  "hash": "c885d5138f2aab9ee88a01ee921824aa",
  "result": {
    "markdown": "---\ntitle: \"2022 Week 33: Psychometrics\"\nexecute: \n  freeze: auto\n---\n\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(tidyverse)\nlibrary(tidytuesdayR)\nlibrary(magrittr)\nlibrary(showtext)\nlibrary(hrbrthemes)\nlibrary(rsvg)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfont_add_google(\"Roboto Condensed\")\nshowtext_auto()\n```\n:::\n\n\n## Load Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntuesdata <- tt_load('2022-08-16')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 3: `characters.csv`\n\tDownloading file 2 of 3: `myers_briggs.csv`\n\tDownloading file 3 of 3: `psych_stats.csv`\n```\n:::\n\n```{.r .cell-code}\npsych_stats <- tuesdata$psych_stats\nhead(psych_stats)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|char_id |char_name     |uni_id |uni_name |question                      |personality      | avg_rating| rank| rating_sd| number_ratings|\n|:-------|:-------------|:------|:--------|:-----------------------------|:----------------|----------:|----:|---------:|--------------:|\n|F2      |Monica Geller |F      |Friends  |messy/neat                    |neat             |       95.7|    9|      11.7|           1079|\n|F2      |Monica Geller |F      |Friends  |disorganized/self-disciplined |self-disciplined |       95.2|   27|      11.2|           1185|\n|F2      |Monica Geller |F      |Friends  |diligent/lazy                 |diligent         |       93.9|   87|      10.4|           1166|\n|F2      |Monica Geller |F      |Friends  |on-time/tardy                 |on-time          |       93.8|   34|      14.3|            236|\n|F2      |Monica Geller |F      |Friends  |competitive/cooperative       |competitive      |       93.6|   56|      13.4|           1168|\n|F2      |Monica Geller |F      |Friends  |scheduled/spontaneous         |scheduled        |       93.4|   23|      14.5|           1173|\n\n</div>\n:::\n:::\n\n\n## Transform Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\npsych_stats <- psych_stats |> \n    filter(str_count(question, \"/\") <=1) |> \n    separate(\"question\", into = c(\"One\", \"Two\"), sep = \"/\", remove = FALSE) |> \n    mutate(Score = ifelse(One == personality, 1, 0)) |> \n    select(-c(One, Two, personality, avg_rating, rank, \n              rating_sd, number_ratings)) |> \n    pivot_wider(names_from = question, \n                values_from = Score,\n                values_fn = sum)\n```\n:::\n\n\n## Dimension Reduction\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfactorRes <- select(psych_stats, -c(char_id, char_name, uni_id, uni_name)) |> \n    factanal(factors = 5, scores = \"regression\")\n\nscores <- factorRes$scores |> \n  set_colnames(c(\"Agreeableness\",\"Openness\",\"Conscientiousness\", \"Extraversion\", \n                 \"Narcicism\")) |> \n  cbind(select(psych_stats, c(char_id, char_name, uni_id, uni_name)))\n\nhead(scores)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| Agreeableness|   Openness| Conscientiousness| Extraversion|  Narcicism|char_id |char_name      |uni_id |uni_name |\n|-------------:|----------:|-----------------:|------------:|----------:|:-------|:--------------|:------|:--------|\n|     0.2599155| -0.4579260|         0.3571530|    1.4393580| -1.0757393|F2      |Monica Geller  |F      |Friends  |\n|     0.2518833|  1.9207419|        -0.0626697|    1.1891392| -1.5597640|F1      |Rachel Green   |F      |Friends  |\n|     0.6608430|  0.7265587|        -1.1785029|   -0.1903910|  0.0073856|F5      |Chandler Bing  |F      |Friends  |\n|     0.8283600|  2.0439851|        -0.1671717|   -1.0484506| -1.4319908|F4      |Joey Tribbiani |F      |Friends  |\n|     1.1395901|  1.7388233|        -0.0116502|   -0.6018825|  0.7415672|F3      |Phoebe Buffay  |F      |Friends  |\n|    -0.6986759| -1.2381315|        -1.7009218|    0.9037070| -0.0672627|F6      |Ross Geller    |F      |Friends  |\n\n</div>\n:::\n:::\n\n\n## Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncharList <- c(\"Walter White\", \"Ted Mosby\", \"Dr. Gregory House\",\n              \"Gaius Baltar\", \"Selina Meyer\", \"Loki\")\n\npersPlot <- scores |> \n    mutate(across(1:5, ~ .x + abs(min(.x)))) |> \n    filter(char_name %in% charList) |> \n    pivot_longer(1:5, \n                 names_to = \"Trait\", \n                 values_to = \"Value\") |> \n    ggplot(aes(x = Trait, \n               y = Value, \n               fill = Trait)) + \n    geom_col() + \n    facet_wrap(~char_name) + \n    theme_ipsum_rc() + \n    coord_polar() + \n    scale_fill_ipsum(guide = guide_legend(nrow = 2)) +\n    theme(legend.position = \"bottom\", \n          axis.ticks = element_blank(), \n          axis.text.x = element_blank(),\n          axis.text.y = element_blank(),\n          plot.margin = margin(l=0, t = 30, b = 30),\n          axis.title.x = element_blank(),\n          axis.title.y = element_blank(),\n          plot.background = element_rect(fill = \"white\", color = NA),\n          panel.spacing = unit(0, \"lines\")) +\n    ggtitle(label = \"Personality Traits of Troubled Protagonists\", \n            subtitle = \"Big Five metrics estimated from openpsychometrics.org data\")\n\ntmp <- tempfile()\nggsave(tmp, persPlot, device = \"svg\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nSaving 7 x 7 in image\n```\n:::\n\n```{.r .cell-code}\nrsvg_png(tmp, \"Out/2022-08-16.png\")\n```\n:::\n\n\n![Final Plot](Out/2022-08-16.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.2.1 (2022-06-23 ucrt)\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\nRunning under: Windows 10 x64 (build 19043)\n\nMatrix products: default\n\nlocale:\n[1] LC_COLLATE=English_Australia.utf8  LC_CTYPE=English_Australia.utf8   \n[3] LC_MONETARY=English_Australia.utf8 LC_NUMERIC=C                      \n[5] LC_TIME=English_Australia.utf8    \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] rsvg_2.3.1         hrbrthemes_0.8.0   showtext_0.9-5     showtextdb_3.0    \n [5] sysfonts_0.8.8     magrittr_2.0.3     tidytuesdayR_1.0.2 forcats_0.5.2     \n [9] stringr_1.4.1      dplyr_1.0.9        purrr_0.3.4        readr_2.1.2       \n[13] tidyr_1.2.0        tibble_3.1.7       tidyverse_1.3.2    ggplot2_3.3.6     \n\nloaded via a namespace (and not attached):\n [1] httr_1.4.4          bit64_4.0.5         vroom_1.5.7        \n [4] jsonlite_1.8.0      modelr_0.1.9        assertthat_0.2.1   \n [7] highr_0.9           selectr_0.4-2       googlesheets4_1.0.1\n[10] cellranger_1.1.0    yaml_2.3.5          gdtools_0.2.4      \n[13] Rttf2pt1_1.3.10     pillar_1.8.1        backports_1.4.1    \n[16] glue_1.6.2          extrafontdb_1.0     digest_0.6.29      \n[19] rvest_1.0.3         colorspace_2.0-3    htmltools_0.5.2    \n[22] pkgconfig_2.0.3     broom_1.0.1         haven_2.5.1        \n[25] scales_1.2.1        svglite_2.1.0       tzdb_0.3.0         \n[28] googledrive_2.0.0   farver_2.1.1        generics_0.1.3     \n[31] usethis_2.1.6       ellipsis_0.3.2      withr_2.5.0        \n[34] cli_3.3.0           crayon_1.5.1        readxl_1.4.1       \n[37] evaluate_0.16       fs_1.5.2            fansi_1.0.3        \n[40] xml2_1.3.3          textshaping_0.3.6   tools_4.2.1        \n[43] hms_1.1.2           gargle_1.2.0        lifecycle_1.0.1    \n[46] munsell_0.5.0       reprex_2.0.2        compiler_4.2.1     \n[49] systemfonts_1.0.4   rlang_1.0.4         grid_4.2.1         \n[52] rstudioapi_0.14     htmlwidgets_1.5.4   labeling_0.4.2     \n[55] rmarkdown_2.16      gtable_0.3.1        DBI_1.1.3          \n[58] curl_4.3.2          R6_2.5.1            lubridate_1.8.0    \n[61] knitr_1.40          bit_4.0.4           fastmap_1.1.0      \n[64] extrafont_0.18      utf8_1.2.2          ragg_1.2.2         \n[67] stringi_1.7.6       parallel_4.2.1      Rcpp_1.0.8.3       \n[70] vctrs_0.4.1         dbplyr_2.2.1        tidyselect_1.1.2   \n[73] xfun_0.31          \n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}