{
  "hash": "f70b1e7a80873c0934c8b5f8501de054",
  "result": {
    "markdown": "---\ntitle: \"2022 Week 35: Pell Grants\"\nexecute: \n  freeze: auto\n---\n\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(tidyverse)\nlibrary(hrbrthemes)\nlibrary(showtext)\nlibrary(urbnmapr)\nlibrary(rsvg)\nlibrary(ggrepel)\nlibrary(ggtext)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfont_add_google(\"Roboto Condensed\")\nshowtext_auto()\n```\n:::\n\n\n## Load Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntuesdata <- tidytuesdayR::tt_load('2022-08-30')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 1: `pell.csv`\n```\n:::\n\n```{.r .cell-code}\npell <- tuesdata$pell\n```\n:::\n\n\n## Clean Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstateSF <- get_urbn_map(map = \"territories_states\", sf = TRUE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nold-style crs object detected; please recreate object with a recent sf::st_crs()\nold-style crs object detected; please recreate object with a recent sf::st_crs()\nold-style crs object detected; please recreate object with a recent sf::st_crs()\nold-style crs object detected; please recreate object with a recent sf::st_crs()\n```\n:::\n\n```{.r .cell-code}\npellSF <- pell |> \n    filter(YEAR == 2017) |> \n    group_by(STATE) |> \n    summarise(sumAward = sum(AWARD),\n              sumRecipient = sum(RECIPIENT)) |> \n    rename(state_abbv = STATE) |> \n    full_join(stateSF, by = \"state_abbv\") |> \n    filter(!is.na(state_name))\n```\n:::\n\n\n## Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\npellPlot <- pellSF %>%\n    ggplot(aes(geometry = geometry)) +\n    geom_sf(aes(fill = round(sumAward/1000000)),\n            color = \"#F3EFE0\", size = 0.25) +\n    geom_text_repel(aes(label = round(sumRecipient/1000)),  \n                    color = \"#AA336A\", \n                    stat = \"sf_coordinates\", \n                    force_pull = 100, \n                    nudge_x = 5000,\n                    min.segment.length = 0, \n                    seed = 1) +\n    theme_ipsum_rc() +\n    theme(panel.background = element_rect(fill = \"#F5F3E5\", \n                                          linetype = 0),\n          plot.background = element_rect(fill = \"#F5F3E5\", \n                                         linetype = 0),\n          legend.position = \"bottom\",\n          axis.title.x=element_blank(),\n          axis.text.x = element_blank(),\n          axis.ticks.x = element_blank(),\n          axis.title.y = element_blank(),\n          axis.text.y = element_blank(),\n          axis.ticks.y = element_blank(),\n          axis.line.x = element_blank(),\n          plot.subtitle = element_markdown()) +\n    scale_x_continuous(expand = c(0, 0)) +\n    scale_y_continuous(expand = c(0, 0)) +\n    scale_fill_continuous(high = \"#132B43\", \n                          low = \"#56B1F7\", \n                          name = \"Total Pell Grant Funding (Million USD$)\")  +\n    labs(title = \"2017 Pell Grants by State\",\n         subtitle = \"States are coloured by <span style='color:#132B43;'>total funding recieved</span> and labeled with the <span style='color:#AA336A;'>number of <br>recipients</span>, counted in thousands.\")\n\ntmp <- tempfile()\nggsave(tmp, pellPlot, device = \"svg\", width = 7, height = 7)\nrsvg_png(tmp, \"Out/2022-08-30.png\")\n```\n:::\n\n\n![Final Plot](Out/2022-08-30.png)\n\n## Session Info\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.2.1 (2022-06-23 ucrt)\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\nRunning under: Windows 10 x64 (build 19043)\n\nMatrix products: default\n\nlocale:\n[1] LC_COLLATE=English_Australia.utf8  LC_CTYPE=English_Australia.utf8   \n[3] LC_MONETARY=English_Australia.utf8 LC_NUMERIC=C                      \n[5] LC_TIME=English_Australia.utf8    \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] ggtext_0.1.1        ggrepel_0.9.1       rsvg_2.3.1         \n [4] urbnmapr_0.0.0.9002 showtext_0.9-5      showtextdb_3.0     \n [7] sysfonts_0.8.8      hrbrthemes_0.8.0    forcats_0.5.2      \n[10] stringr_1.4.1       dplyr_1.0.9         purrr_0.3.4        \n[13] readr_2.1.2         tidyr_1.2.0         tibble_3.1.7       \n[16] tidyverse_1.3.2     ggplot2_3.3.6      \n\nloaded via a namespace (and not attached):\n [1] fs_1.5.2            sf_1.0-8            usethis_2.1.6      \n [4] lubridate_1.8.0     bit64_4.0.5         httr_1.4.4         \n [7] tools_4.2.1         backports_1.4.1     utf8_1.2.2         \n[10] R6_2.5.1            KernSmooth_2.23-20  DBI_1.1.3          \n[13] colorspace_2.0-3    withr_2.5.0         tidyselect_1.1.2   \n[16] bit_4.0.4           curl_4.3.2          compiler_4.2.1     \n[19] extrafontdb_1.0     textshaping_0.3.6   cli_3.3.0          \n[22] rvest_1.0.3         xml2_1.3.3          labeling_0.4.2     \n[25] scales_1.2.1        classInt_0.4-7      proxy_0.4-27       \n[28] systemfonts_1.0.4   digest_0.6.29       svglite_2.1.0      \n[31] rmarkdown_2.16      tidytuesdayR_1.0.2  pkgconfig_2.0.3    \n[34] htmltools_0.5.2     extrafont_0.18      dbplyr_2.2.1       \n[37] fastmap_1.1.0       htmlwidgets_1.5.4   rlang_1.0.4        \n[40] readxl_1.4.1        rstudioapi_0.14     farver_2.1.1       \n[43] generics_0.1.3      jsonlite_1.8.0      vroom_1.5.7        \n[46] googlesheets4_1.0.1 magrittr_2.0.3      s2_1.1.0           \n[49] Rcpp_1.0.8.3        munsell_0.5.0       fansi_1.0.3        \n[52] gdtools_0.2.4       lifecycle_1.0.1     stringi_1.7.6      \n[55] yaml_2.3.5          grid_4.2.1          parallel_4.2.1     \n[58] crayon_1.5.1        haven_2.5.1         gridtext_0.1.4     \n[61] hms_1.1.2           knitr_1.40          pillar_1.8.1       \n[64] markdown_1.1        wk_0.6.0            reprex_2.0.2       \n[67] glue_1.6.2          evaluate_0.16       modelr_0.1.9       \n[70] vctrs_0.4.1         tzdb_0.3.0          selectr_0.4-2      \n[73] Rttf2pt1_1.3.10     cellranger_1.1.0    gtable_0.3.1       \n[76] assertthat_0.2.1    xfun_0.31           broom_1.0.1        \n[79] e1071_1.7-11        ragg_1.2.2          class_7.3-20       \n[82] googledrive_2.0.0   gargle_1.2.0        units_0.8-0        \n[85] ellipsis_0.3.2     \n```\n:::\n:::\n",
    "supporting": [
      "2022-08-30_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}